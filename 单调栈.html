<html>
<head>
  <title>Evernote Export</title>
  <basefont face="微软雅黑" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="YXBJ Windows/605627 (zh-CN, DDL); Windows/10.0.0 (Win64); EDAMVersion=V2;"/>
  <meta name="content-class" content="maxiang"/>
  <style>
    body, td {
      font-family: 微软雅黑;
      font-size: 10pt;
    }
  </style>
</head>
<body>
<a name="8031"/>

<div><span lang="v2" style="color: #2c3f51; font-family: 'Helvetica Neue', Arial, 'Hiragino Sans GB', STHeiti, 'Microsoft YaHei', 'WenQuanYi Micro Hei', SimSun, Song, sans-serif; line-height: 1.6; background: none;"><del style="position:relative;display:block;z-index:10;"><a href="http://maxiang.io/#/?provider=evernote&amp;guid=c7437f11-0f5f-4d2c-9de8-b434b5478baf&amp;notebook=%E5%89%8D%E7%AB%AF%E9%9D%A2%E8%AF%95" style="position: absolute;color: #FFF;text-decoration: none;font-size: 12px;height: 25px;border-radius: 0;margin-top: -20px;right: 15px;background: rgba(0, 0, 0, 0);border-left: 10px solid #BB3A34;border-right: 10px solid #BB3A34;border-bottom: 5px solid rgba(0, 0, 0, 0);width: 0;text-indent:-100000px;">Edit</a></del><div style="color: #2c3f51; font-family: 'Helvetica Neue', Arial, 'Hiragino Sans GB', STHeiti, 'Microsoft YaHei', 'WenQuanYi Micro Hei', SimSun, Song, sans-serif; line-height: 1.6;">
                        
                    

<h1 style="font-size: 41.6px; margin: 1.2em 0 .6em 0; font-family: inherit; font-weight: bold; line-height: 1.1; color: inherit; margin-top: 21px; margin-bottom: 10.5px; text-align: start;">算法–单调栈</h1>

<p style="margin: 0 0 1.1em; line-height: 1.6;"></p><p style="margin: 0 0 1.1em; color: rgba(44,63,81,0.3); line-height: 1.6;"><code style="font-family: 'Source Code Pro',Consolas,monospace; font-size: .9em; background-color: #f9f2f4; white-space: normal; padding: 2px 5px; border-radius: 0; color: #fff; background: rgba(44,63,81,0.3); margin-right: 6px;">前端面试</code> <code style="font-family: 'Source Code Pro',Consolas,monospace; font-size: .9em; background-color: #f9f2f4; white-space: normal; padding: 2px 5px; color: rgba(44,63,81,0.5); border-radius: 0; background: rgba(102,128,153,0.075);">面试</code> </p><p style="margin: 0 0 1.1em; line-height: 1.6;"></p>



<h3 style="font-family: inherit; font-weight: bold; color: inherit; margin-top: 21px; margin-bottom: 10.5px; font-size: 27.2px; margin: 1.2em 0 .6em 0; text-align: start; line-height: 1.6;">每日温度</h3>

<p style="margin: 0 0 1.1em; line-height: 1.6;"><img src="https://raw.githubusercontent.com/wangyongalive/note/main/单调栈_files/.1638892650362.png" type="image/png" data-filename=".1638892650362.png" alt="Alt text" longdesc="./1638892650362.png" style="border: 0; vertical-align: middle; max-width: 100%;" title=""/></p>

<pre style="font-family: 'Source Code Pro',Consolas,monospace; white-space: pre-wrap; display: block; background-color: rgba(102,128,153,0.05); color: #333; word-wrap: break-word; font-size: .9em; background: #f6f6f6; line-height: 1.6; margin: 0 0 1.1em; padding: 0; border: 0; border-radius: 5px; text-align: start; word-break: break-all;"><code style="font-family: 'Source Code Pro',Consolas,monospace; font-size: inherit; background-color: transparent; white-space: pre-wrap; border-radius: 0; color: #f8f8f2; display: block; overflow-x: auto; background: #23241f; padding: 1.3em 2em;"><div style="min-height: 1.5em; color: inherit; line-height: 1.6; background-color: transparent;"><span style="display: inline; line-height: 1.6; color: #75715e; background-color: transparent;">/**</span>
</div><div style="min-height: 1.5em; color: inherit; line-height: 1.6; background-color: transparent;"><span style="display: inline; line-height: 1.6; color: #75715e; background-color: transparent;"> * @param {number[]} T</span>
</div><div style="min-height: 1.5em; color: inherit; line-height: 1.6; background-color: transparent;"><span style="display: inline; line-height: 1.6; color: #75715e; background-color: transparent;"> * @return {number[]}</span>
</div><div style="min-height: 1.5em; color: inherit; line-height: 1.6; background-color: transparent;"><span style="display: inline; line-height: 1.6; color: #75715e; background-color: transparent;"> */</span>
</div><div style="min-height: 1.5em; color: inherit; line-height: 1.6; background-color: transparent;"> <span style="display: inline; line-height: 1.6; color: #75715e; background-color: transparent;">// 单调递减栈</span>
</div><div style="min-height: 1.5em; color: inherit; line-height: 1.6; background-color: transparent;"><span style="display: inline; line-height: 1.6; color: #f92672; background-color: transparent;">const</span> dailyTemperatures = <span style="display: inline; line-height: 1.6; color: #f92672; background-color: transparent;"><span style="display: inline; line-height: 1.6; color: #66d9ef; background-color: transparent;">function</span> (<span style="display: inline; line-height: 1.6; color: #f8f8f2; background-color: transparent;">T</span>) </span>{
</div><div style="min-height: 1.5em; color: inherit; line-height: 1.6; background-color: transparent;">    <span style="display: inline; line-height: 1.6; color: #f92672; background-color: transparent;">let</span> len = T.length;
</div><div style="min-height: 1.5em; color: inherit; line-height: 1.6; background-color: transparent;">    <span style="display: inline; line-height: 1.6; color: #f92672; background-color: transparent;">let</span> res = <span style="display: inline; line-height: 1.6; color: #e6db74; background-color: transparent;">Array</span>(len).fill(<span style="display: inline; line-height: 1.6; color: #ae81ff; background-color: transparent;">0</span>), stack = [];
</div><div style="min-height: 1.5em; color: inherit; line-height: 1.6; background-color: transparent;">    <span style="display: inline; line-height: 1.6; color: #f92672; background-color: transparent;">for</span> (<span style="display: inline; line-height: 1.6; color: #f92672; background-color: transparent;">let</span> i = <span style="display: inline; line-height: 1.6; color: #ae81ff; background-color: transparent;">0</span>; i &lt; len; i++) {
</div><div style="min-height: 1.5em; color: inherit; line-height: 1.6; background-color: transparent;">        <span style="display: inline; line-height: 1.6; color: #75715e; background-color: transparent;">// 当栈不为空且当前的遍历值大于栈顶元素，则出栈</span>
</div><div style="min-height: 1.5em; color: inherit; line-height: 1.6; background-color: transparent;">        <span style="display: inline; line-height: 1.6; color: #f92672; background-color: transparent;">while</span> (stack.length &amp;&amp; T[stack[stack.length - <span style="display: inline; line-height: 1.6; color: #ae81ff; background-color: transparent;">1</span>]] &lt; T[i]) {
</div><div style="min-height: 1.5em; color: inherit; line-height: 1.6; background-color: transparent;">            <span style="display: inline; line-height: 1.6; color: #f92672; background-color: transparent;">let</span> index = stack.pop(); <span style="display: inline; line-height: 1.6; color: #75715e; background-color: transparent;">// </span>
</div><div style="min-height: 1.5em; color: inherit; line-height: 1.6; background-color: transparent;">            res[index] = i - index; <span style="display: inline; line-height: 1.6; color: #75715e; background-color: transparent;">// 计算距离</span>
</div><div style="min-height: 1.5em; color: inherit; line-height: 1.6; background-color: transparent;">        }
</div><div style="min-height: 1.5em; color: inherit; line-height: 1.6; background-color: transparent;">        stack.push(i);
</div><div style="min-height: 1.5em; color: inherit; line-height: 1.6; background-color: transparent;">    }
</div><div style="min-height: 1.5em; color: inherit; line-height: 1.6; background-color: transparent;">    <span style="display: inline; line-height: 1.6; color: #f92672; background-color: transparent;">return</span> res
</div><div style="min-height: 1.5em; color: inherit; line-height: 1.6; background-color: transparent;">};
</div></code></pre>



<h3 style="font-family: inherit; font-weight: bold; color: inherit; margin-top: 21px; margin-bottom: 10.5px; font-size: 27.2px; margin: 1.2em 0 .6em 0; text-align: start; line-height: 1.6;">下一个更大元素 I</h3>

<p style="margin: 0 0 1.1em; line-height: 1.6;"><img src="https://raw.githubusercontent.com/wangyongalive/note/main/单调栈_files/.1638892684544.png" type="image/png" data-filename=".1638892684544.png" alt="Alt text" longdesc="./1638892684544.png" style="border: 0; vertical-align: middle; max-width: 100%;" title=""/></p>



<pre style="font-family: 'Source Code Pro',Consolas,monospace; white-space: pre-wrap; display: block; background-color: rgba(102,128,153,0.05); color: #333; word-wrap: break-word; font-size: .9em; background: #f6f6f6; line-height: 1.6; margin: 0 0 1.1em; padding: 0; border: 0; border-radius: 5px; text-align: start; word-break: break-all;"><code style="font-family: 'Source Code Pro',Consolas,monospace; font-size: inherit; background-color: transparent; white-space: pre-wrap; border-radius: 0; color: #f8f8f2; display: block; overflow-x: auto; background: #23241f; padding: 1.3em 2em;"><div style="min-height: 1.5em; color: inherit; line-height: 1.6; background-color: transparent;"><span style="display: inline; line-height: 1.6; color: #75715e; background-color: transparent;">/**</span>
</div><div style="min-height: 1.5em; color: inherit; line-height: 1.6; background-color: transparent;"><span style="display: inline; line-height: 1.6; color: #75715e; background-color: transparent;"> * @param {number[]} nums1</span>
</div><div style="min-height: 1.5em; color: inherit; line-height: 1.6; background-color: transparent;"><span style="display: inline; line-height: 1.6; color: #75715e; background-color: transparent;"> * @param {number[]} nums2</span>
</div><div style="min-height: 1.5em; color: inherit; line-height: 1.6; background-color: transparent;"><span style="display: inline; line-height: 1.6; color: #75715e; background-color: transparent;"> * @return {number[]}</span>
</div><div style="min-height: 1.5em; color: inherit; line-height: 1.6; background-color: transparent;"><span style="display: inline; line-height: 1.6; color: #75715e; background-color: transparent;"> */</span>
</div><div style="min-height: 1.5em; color: inherit; line-height: 1.6; background-color: transparent;"><span style="display: inline; line-height: 1.6; color: #75715e; background-color: transparent;">// 单调递增栈：只有比栈顶小的才能入栈，否则就把栈顶元素依次出栈后，再入栈。适用于求解第一个大于该位置元素的数。</span>
</div><div style="min-height: 1.5em; color: inherit; line-height: 1.6; background-color: transparent;"><span style="display: inline; line-height: 1.6; color: #75715e; background-color: transparent;">// 单调递减栈：与单调递增栈相反。适用于求解第一个小于该位置元素的数。</span>
</div><div style="min-height: 1.5em; color: inherit; line-height: 1.6; background-color: transparent;"><span style="display: inline; line-height: 1.6; color: #f92672; background-color: transparent;">var</span> nextGreaterElement = <span style="display: inline; line-height: 1.6; color: #f92672; background-color: transparent;"><span style="display: inline; line-height: 1.6; color: #66d9ef; background-color: transparent;">function</span> (<span style="display: inline; line-height: 1.6; color: #f8f8f2; background-color: transparent;">nums1, nums2</span>) </span>{
</div><div style="min-height: 1.5em; color: inherit; line-height: 1.6; background-color: transparent;">    <span style="display: inline; line-height: 1.6; color: #f92672; background-color: transparent;">let</span> stack = [];
</div><div style="min-height: 1.5em; color: inherit; line-height: 1.6; background-color: transparent;">    <span style="display: inline; line-height: 1.6; color: #f92672; background-color: transparent;">let</span> map = <span style="display: inline; line-height: 1.6; color: #f92672; background-color: transparent;">new</span> <span style="display: inline; line-height: 1.6; color: #e6db74; background-color: transparent;">Map</span>();
</div><div style="min-height: 1.5em; color: inherit; line-height: 1.6; background-color: transparent;">    <span style="display: inline; line-height: 1.6; color: #f92672; background-color: transparent;">for</span> (<span style="display: inline; line-height: 1.6; color: #f92672; background-color: transparent;">let</span> i = <span style="display: inline; line-height: 1.6; color: #ae81ff; background-color: transparent;">0</span>; i &lt; nums2.length; i++) {
</div><div style="min-height: 1.5em; color: inherit; line-height: 1.6; background-color: transparent;">        <span style="display: inline; line-height: 1.6; color: #f92672; background-color: transparent;">while</span> (stack.length &amp;&amp; nums2[i] &gt; nums2[stack[stack.length - <span style="display: inline; line-height: 1.6; color: #ae81ff; background-color: transparent;">1</span>]]) {
</div><div style="min-height: 1.5em; color: inherit; line-height: 1.6; background-color: transparent;">            <span style="display: inline; line-height: 1.6; color: #f92672; background-color: transparent;">let</span> index = stack.pop();
</div><div style="min-height: 1.5em; color: inherit; line-height: 1.6; background-color: transparent;">            map.set(nums2[index], nums2[i]); <span style="display: inline; line-height: 1.6; color: #75715e; background-color: transparent;">// 保存数值</span>
</div><div style="min-height: 1.5em; color: inherit; line-height: 1.6; background-color: transparent;">        }
</div><div style="min-height: 1.5em; color: inherit; line-height: 1.6; background-color: transparent;">        stack.push(i);
</div><div style="min-height: 1.5em; color: inherit; line-height: 1.6; background-color: transparent;">    }
</div><div style="min-height: 1.5em; color: inherit; line-height: 1.6; background-color: transparent;">    <span style="display: inline; line-height: 1.6; color: #75715e; background-color: transparent;">// console.log(map)</span>
</div><div style="min-height: 1.5em; color: inherit; line-height: 1.6; background-color: transparent;">    <span style="display: inline; line-height: 1.6; color: #f92672; background-color: transparent;">let</span> res = [];
</div><div style="min-height: 1.5em; color: inherit; line-height: 1.6; background-color: transparent;">    <span style="display: inline; line-height: 1.6; color: #75715e; background-color: transparent;">// 遍历数组1中的数据，没有的话就是-1</span>
</div><div style="min-height: 1.5em; color: inherit; line-height: 1.6; background-color: transparent;">    <span style="display: inline; line-height: 1.6; color: #f92672; background-color: transparent;">for</span> (<span style="display: inline; line-height: 1.6; color: #f92672; background-color: transparent;">let</span> j = <span style="display: inline; line-height: 1.6; color: #ae81ff; background-color: transparent;">0</span>; j &lt; nums1.length; j++) {
</div><div style="min-height: 1.5em; color: inherit; line-height: 1.6; background-color: transparent;">        res[j] = map.get(nums1[j]) || <span style="display: inline; line-height: 1.6; color: #ae81ff; background-color: transparent;">-1</span>;
</div><div style="min-height: 1.5em; color: inherit; line-height: 1.6; background-color: transparent;">    }
</div><div style="min-height: 1.5em; color: inherit; line-height: 1.6; background-color: transparent;">    <span style="display: inline; line-height: 1.6; color: #f92672; background-color: transparent;">return</span> res;
</div><div style="min-height: 1.5em; color: inherit; line-height: 1.6; background-color: transparent;">};
</div></code></pre>



<h3 style="font-family: inherit; font-weight: bold; color: inherit; margin-top: 21px; margin-bottom: 10.5px; font-size: 27.2px; margin: 1.2em 0 .6em 0; text-align: start; line-height: 1.6;">下一个更大元素 II</h3>



<p style="margin: 0 0 1.1em; line-height: 1.6;"><img src="https://raw.githubusercontent.com/wangyongalive/note/main/单调栈_files/.1638968759783.png" type="image/png" data-filename=".1638968759783.png" alt="Alt text" longdesc="./1638968759783.png" style="border: 0; vertical-align: middle; max-width: 100%;" title=""/></p>

<pre style="font-family: 'Source Code Pro',Consolas,monospace; white-space: pre-wrap; display: block; background-color: rgba(102,128,153,0.05); color: #333; word-wrap: break-word; font-size: .9em; background: #f6f6f6; line-height: 1.6; margin: 0 0 1.1em; padding: 0; border: 0; border-radius: 5px; text-align: start; word-break: break-all;"><code style="font-family: 'Source Code Pro',Consolas,monospace; font-size: inherit; background-color: transparent; white-space: pre-wrap; border-radius: 0; color: #f8f8f2; display: block; overflow-x: auto; background: #23241f; padding: 1.3em 2em;"><div style="min-height: 1.5em; color: inherit; line-height: 1.6; background-color: transparent;"><span style="display: inline; line-height: 1.6; color: #75715e; background-color: transparent;">/**</span>
</div><div style="min-height: 1.5em; color: inherit; line-height: 1.6; background-color: transparent;"><span style="display: inline; line-height: 1.6; color: #75715e; background-color: transparent;"> * @param {number[]} nums</span>
</div><div style="min-height: 1.5em; color: inherit; line-height: 1.6; background-color: transparent;"><span style="display: inline; line-height: 1.6; color: #75715e; background-color: transparent;"> * @return {number[]}</span>
</div><div style="min-height: 1.5em; color: inherit; line-height: 1.6; background-color: transparent;"><span style="display: inline; line-height: 1.6; color: #75715e; background-color: transparent;"> */</span>
</div><div style="min-height: 1.5em; color: inherit; line-height: 1.6; background-color: transparent;"><span style="display: inline; line-height: 1.6; color: #f92672; background-color: transparent;">var</span> nextGreaterElements = <span style="display: inline; line-height: 1.6; color: #f92672; background-color: transparent;"><span style="display: inline; line-height: 1.6; color: #66d9ef; background-color: transparent;">function</span> (<span style="display: inline; line-height: 1.6; color: #f8f8f2; background-color: transparent;">nums</span>) </span>{
</div><div style="min-height: 1.5em; color: inherit; line-height: 1.6; background-color: transparent;">    <span style="display: inline; line-height: 1.6; color: #f92672; background-color: transparent;">let</span> stack = [];
</div><div style="min-height: 1.5em; color: inherit; line-height: 1.6; background-color: transparent;">    <span style="display: inline; line-height: 1.6; color: #f92672; background-color: transparent;">let</span> res = <span style="display: inline; line-height: 1.6; color: #f92672; background-color: transparent;">new</span> <span style="display: inline; line-height: 1.6; color: #e6db74; background-color: transparent;">Array</span>(nums.length).fill(<span style="display: inline; line-height: 1.6; color: #ae81ff; background-color: transparent;">-1</span>);
</div><div style="min-height: 1.5em; color: inherit; line-height: 1.6; background-color: transparent;">    <span style="display: inline; line-height: 1.6; color: #75715e; background-color: transparent;">// 遍历两遍数组</span>
</div><div style="min-height: 1.5em; color: inherit; line-height: 1.6; background-color: transparent;">    <span style="display: inline; line-height: 1.6; color: #f92672; background-color: transparent;">for</span> (<span style="display: inline; line-height: 1.6; color: #f92672; background-color: transparent;">let</span> i = <span style="display: inline; line-height: 1.6; color: #ae81ff; background-color: transparent;">0</span>; i &lt; nums.length * <span style="display: inline; line-height: 1.6; color: #ae81ff; background-color: transparent;">2</span>; i++) {
</div><div style="min-height: 1.5em; color: inherit; line-height: 1.6; background-color: transparent;">        <span style="display: inline; line-height: 1.6; color: #f92672; background-color: transparent;">while</span> (
</div><div style="min-height: 1.5em; color: inherit; line-height: 1.6; background-color: transparent;">            stack.length &amp;&amp;
</div><div style="min-height: 1.5em; color: inherit; line-height: 1.6; background-color: transparent;">            nums[i % nums.length] &gt; nums[stack[stack.length - <span style="display: inline; line-height: 1.6; color: #ae81ff; background-color: transparent;">1</span>]]
</div><div style="min-height: 1.5em; color: inherit; line-height: 1.6; background-color: transparent;">        ) {
</div><div style="min-height: 1.5em; color: inherit; line-height: 1.6; background-color: transparent;">            <span style="display: inline; line-height: 1.6; color: #f92672; background-color: transparent;">let</span> index = stack.pop();
</div><div style="min-height: 1.5em; color: inherit; line-height: 1.6; background-color: transparent;">            res[index] = nums[i % nums.length];
</div><div style="min-height: 1.5em; color: inherit; line-height: 1.6; background-color: transparent;">        }
</div><div style="min-height: 1.5em; color: inherit; line-height: 1.6; background-color: transparent;">        stack.push(i % nums.length);
</div><div style="min-height: 1.5em; color: inherit; line-height: 1.6; background-color: transparent;">    }
</div><div style="min-height: 1.5em; color: inherit; line-height: 1.6; background-color: transparent;">    <span style="display: inline; line-height: 1.6; color: #f92672; background-color: transparent;">return</span> res;
</div><div style="min-height: 1.5em; color: inherit; line-height: 1.6; background-color: transparent;">};
</div></code></pre>



<h3 style="font-family: inherit; font-weight: bold; color: inherit; margin-top: 21px; margin-bottom: 10.5px; font-size: 27.2px; margin: 1.2em 0 .6em 0; text-align: start; line-height: 1.6;">接雨水</h3>



<p style="margin: 0 0 1.1em; line-height: 1.6;"><img src="https://raw.githubusercontent.com/wangyongalive/note/main/单调栈_files/.1638970914377.png" type="image/png" data-filename=".1638970914377.png" alt="Alt text" longdesc="./1638970914377.png" style="border: 0; vertical-align: middle; max-width: 100%;" title=""/></p>



<p style="margin: 0 0 1.1em; line-height: 1.6;"><img src="https://raw.githubusercontent.com/wangyongalive/note/main/单调栈_files/.1638970936675.png" type="image/png" data-filename=".1638970936675.png" alt="Alt text" longdesc="./1638970936675.png" style="border: 0; vertical-align: middle; max-width: 100%;" title=""/></p>



<p style="margin: 0 0 1.1em; line-height: 1.6;"><img src="https://raw.githubusercontent.com/wangyongalive/note/main/单调栈_files/.1638971069721.png" type="image/png" data-filename=".1638971069721.png" alt="Alt text" longdesc="./1638971069721.png" style="border: 0; vertical-align: middle; max-width: 100%;" title=""/></p>

<pre style="font-family: 'Source Code Pro',Consolas,monospace; white-space: pre-wrap; display: block; background-color: rgba(102,128,153,0.05); color: #333; word-wrap: break-word; font-size: .9em; background: #f6f6f6; line-height: 1.6; margin: 0 0 1.1em; padding: 0; border: 0; border-radius: 5px; text-align: start; word-break: break-all;"><code style="font-family: 'Source Code Pro',Consolas,monospace; font-size: inherit; background-color: transparent; white-space: pre-wrap; border-radius: 0; color: #f8f8f2; display: block; overflow-x: auto; background: #23241f; padding: 1.3em 2em;"><div style="min-height: 1.5em; color: inherit; line-height: 1.6; background-color: transparent;"><span style="display: inline; line-height: 1.6; color: #75715e; background-color: transparent;">/**</span>
</div><div style="min-height: 1.5em; color: inherit; line-height: 1.6; background-color: transparent;"><span style="display: inline; line-height: 1.6; color: #75715e; background-color: transparent;"> * @param {number[]} height</span>
</div><div style="min-height: 1.5em; color: inherit; line-height: 1.6; background-color: transparent;"><span style="display: inline; line-height: 1.6; color: #75715e; background-color: transparent;"> * @return {number}</span>
</div><div style="min-height: 1.5em; color: inherit; line-height: 1.6; background-color: transparent;"><span style="display: inline; line-height: 1.6; color: #75715e; background-color: transparent;"> */</span>
</div><div style="min-height: 1.5em; color: inherit; line-height: 1.6; background-color: transparent;"><span style="display: inline; line-height: 1.6; color: #f92672; background-color: transparent;">var</span> trap = <span style="display: inline; line-height: 1.6; color: #f92672; background-color: transparent;"><span style="display: inline; line-height: 1.6; color: #66d9ef; background-color: transparent;">function</span> (<span style="display: inline; line-height: 1.6; color: #f8f8f2; background-color: transparent;">height</span>) </span>{
</div><div style="min-height: 1.5em; color: inherit; line-height: 1.6; background-color: transparent;">    <span style="display: inline; line-height: 1.6; color: #f92672; background-color: transparent;">const</span> n = height.length;
</div><div style="min-height: 1.5em; color: inherit; line-height: 1.6; background-color: transparent;">    <span style="display: inline; line-height: 1.6; color: #f92672; background-color: transparent;">if</span> (n == <span style="display: inline; line-height: 1.6; color: #ae81ff; background-color: transparent;">0</span>) {
</div><div style="min-height: 1.5em; color: inherit; line-height: 1.6; background-color: transparent;">        <span style="display: inline; line-height: 1.6; color: #f92672; background-color: transparent;">return</span> <span style="display: inline; line-height: 1.6; color: #ae81ff; background-color: transparent;">0</span>;
</div><div style="min-height: 1.5em; color: inherit; line-height: 1.6; background-color: transparent;">    }
</div><div style="min-height: 1.5em; color: inherit; line-height: 1.6; background-color: transparent;"><div style="line-height: 1.6;"></div>
</div><div style="min-height: 1.5em; color: inherit; line-height: 1.6; background-color: transparent;">    <span style="display: inline; line-height: 1.6; color: #f92672; background-color: transparent;">const</span> leftMax = <span style="display: inline; line-height: 1.6; color: #f92672; background-color: transparent;">new</span> <span style="display: inline; line-height: 1.6; color: #e6db74; background-color: transparent;">Array</span>(n).fill(<span style="display: inline; line-height: 1.6; color: #ae81ff; background-color: transparent;">0</span>);
</div><div style="min-height: 1.5em; color: inherit; line-height: 1.6; background-color: transparent;">    leftMax[<span style="display: inline; line-height: 1.6; color: #ae81ff; background-color: transparent;">0</span>] = height[<span style="display: inline; line-height: 1.6; color: #ae81ff; background-color: transparent;">0</span>];
</div><div style="min-height: 1.5em; color: inherit; line-height: 1.6; background-color: transparent;">    <span style="display: inline; line-height: 1.6; color: #f92672; background-color: transparent;">for</span> (<span style="display: inline; line-height: 1.6; color: #f92672; background-color: transparent;">let</span> i = <span style="display: inline; line-height: 1.6; color: #ae81ff; background-color: transparent;">1</span>; i &lt; n; ++i) {
</div><div style="min-height: 1.5em; color: inherit; line-height: 1.6; background-color: transparent;">        leftMax[i] = <span style="display: inline; line-height: 1.6; color: #e6db74; background-color: transparent;">Math</span>.max(leftMax[i - <span style="display: inline; line-height: 1.6; color: #ae81ff; background-color: transparent;">1</span>], height[i]);
</div><div style="min-height: 1.5em; color: inherit; line-height: 1.6; background-color: transparent;">    }
</div><div style="min-height: 1.5em; color: inherit; line-height: 1.6; background-color: transparent;"><div style="line-height: 1.6;"></div>
</div><div style="min-height: 1.5em; color: inherit; line-height: 1.6; background-color: transparent;">    <span style="display: inline; line-height: 1.6; color: #f92672; background-color: transparent;">const</span> rightMax = <span style="display: inline; line-height: 1.6; color: #f92672; background-color: transparent;">new</span> <span style="display: inline; line-height: 1.6; color: #e6db74; background-color: transparent;">Array</span>(n).fill(<span style="display: inline; line-height: 1.6; color: #ae81ff; background-color: transparent;">0</span>);
</div><div style="min-height: 1.5em; color: inherit; line-height: 1.6; background-color: transparent;">    rightMax[n - <span style="display: inline; line-height: 1.6; color: #ae81ff; background-color: transparent;">1</span>] = height[n - <span style="display: inline; line-height: 1.6; color: #ae81ff; background-color: transparent;">1</span>];
</div><div style="min-height: 1.5em; color: inherit; line-height: 1.6; background-color: transparent;">    <span style="display: inline; line-height: 1.6; color: #f92672; background-color: transparent;">for</span> (<span style="display: inline; line-height: 1.6; color: #f92672; background-color: transparent;">let</span> i = n - <span style="display: inline; line-height: 1.6; color: #ae81ff; background-color: transparent;">2</span>; i &gt;= <span style="display: inline; line-height: 1.6; color: #ae81ff; background-color: transparent;">0</span>; --i) {
</div><div style="min-height: 1.5em; color: inherit; line-height: 1.6; background-color: transparent;">        rightMax[i] = <span style="display: inline; line-height: 1.6; color: #e6db74; background-color: transparent;">Math</span>.max(rightMax[i + <span style="display: inline; line-height: 1.6; color: #ae81ff; background-color: transparent;">1</span>], height[i]);
</div><div style="min-height: 1.5em; color: inherit; line-height: 1.6; background-color: transparent;">    }
</div><div style="min-height: 1.5em; color: inherit; line-height: 1.6; background-color: transparent;"><div style="line-height: 1.6;"></div>
</div><div style="min-height: 1.5em; color: inherit; line-height: 1.6; background-color: transparent;">    <span style="display: inline; line-height: 1.6; color: #f92672; background-color: transparent;">let</span> ans = <span style="display: inline; line-height: 1.6; color: #ae81ff; background-color: transparent;">0</span>;
</div><div style="min-height: 1.5em; color: inherit; line-height: 1.6; background-color: transparent;">    <span style="display: inline; line-height: 1.6; color: #f92672; background-color: transparent;">for</span> (<span style="display: inline; line-height: 1.6; color: #f92672; background-color: transparent;">let</span> i = <span style="display: inline; line-height: 1.6; color: #ae81ff; background-color: transparent;">0</span>; i &lt; n; ++i) {
</div><div style="min-height: 1.5em; color: inherit; line-height: 1.6; background-color: transparent;">        ans += <span style="display: inline; line-height: 1.6; color: #e6db74; background-color: transparent;">Math</span>.min(leftMax[i], rightMax[i]) - height[i];
</div><div style="min-height: 1.5em; color: inherit; line-height: 1.6; background-color: transparent;">    }
</div><div style="min-height: 1.5em; color: inherit; line-height: 1.6; background-color: transparent;">    <span style="display: inline; line-height: 1.6; color: #f92672; background-color: transparent;">return</span> ans;
</div><div style="min-height: 1.5em; color: inherit; line-height: 1.6; background-color: transparent;">};
</div></code></pre>



<h3 style="font-family: inherit; font-weight: bold; color: inherit; margin-top: 21px; margin-bottom: 10.5px; font-size: 27.2px; margin: 1.2em 0 .6em 0; text-align: start; line-height: 1.6;">柱状图中最大的矩形</h3>



<p style="margin: 0 0 1.1em; line-height: 1.6;"><img src="https://raw.githubusercontent.com/wangyongalive/note/main/单调栈_files/.1638978120478.png" type="image/png" data-filename=".1638978120478.png" alt="Alt text" longdesc="./1638978120478.png" style="border: 0; vertical-align: middle; max-width: 100%;" title=""/></p>

<pre style="font-family: 'Source Code Pro',Consolas,monospace; white-space: pre-wrap; display: block; background-color: rgba(102,128,153,0.05); color: #333; word-wrap: break-word; font-size: .9em; background: #f6f6f6; line-height: 1.6; margin: 0 0 1.1em; padding: 0; border: 0; border-radius: 5px; text-align: start; word-break: break-all;"><code style="font-family: 'Source Code Pro',Consolas,monospace; font-size: inherit; background-color: transparent; white-space: pre-wrap; border-radius: 0; color: #f8f8f2; display: block; overflow-x: auto; background: #23241f; padding: 1.3em 2em;"><div style="min-height: 1.5em; color: inherit; line-height: 1.6; background-color: transparent;"><span style="display: inline; line-height: 1.6; color: #f92672; background-color: transparent;">const</span> largestRectangleArea = <span style="display: inline; line-height: 1.6; color: #f92672; background-color: transparent;">(<span style="display: inline; line-height: 1.6; color: #f8f8f2; background-color: transparent;">heights</span>) =&gt;</span> {
</div><div style="min-height: 1.5em; color: inherit; line-height: 1.6; background-color: transparent;">    <span style="display: inline; line-height: 1.6; color: #f92672; background-color: transparent;">let</span> maxArea = <span style="display: inline; line-height: 1.6; color: #ae81ff; background-color: transparent;">0</span>
</div><div style="min-height: 1.5em; color: inherit; line-height: 1.6; background-color: transparent;">    <span style="display: inline; line-height: 1.6; color: #f92672; background-color: transparent;">const</span> stack = []
</div><div style="min-height: 1.5em; color: inherit; line-height: 1.6; background-color: transparent;">    heights = [<span style="display: inline; line-height: 1.6; color: #ae81ff; background-color: transparent;">0</span>, ...heights, <span style="display: inline; line-height: 1.6; color: #ae81ff; background-color: transparent;">0</span>]
</div><div style="min-height: 1.5em; color: inherit; line-height: 1.6; background-color: transparent;">    <span style="display: inline; line-height: 1.6; color: #f92672; background-color: transparent;">for</span> (<span style="display: inline; line-height: 1.6; color: #f92672; background-color: transparent;">let</span> i = <span style="display: inline; line-height: 1.6; color: #ae81ff; background-color: transparent;">0</span>; i &lt; heights.length; i++) {
</div><div style="min-height: 1.5em; color: inherit; line-height: 1.6; background-color: transparent;">        <span style="display: inline; line-height: 1.6; color: #f92672; background-color: transparent;">while</span> (heights[i] &lt; heights[stack[stack.length - <span style="display: inline; line-height: 1.6; color: #ae81ff; background-color: transparent;">1</span>]]) { <span style="display: inline; line-height: 1.6; color: #75715e; background-color: transparent;">// 当前bar比栈顶bar矮</span>
</div><div style="min-height: 1.5em; color: inherit; line-height: 1.6; background-color: transparent;">            <span style="display: inline; line-height: 1.6; color: #f92672; background-color: transparent;">const</span> stackTopIndex = stack.pop() <span style="display: inline; line-height: 1.6; color: #75715e; background-color: transparent;">// 栈顶元素出栈，并保存栈顶bar的索引</span>
</div><div style="min-height: 1.5em; color: inherit; line-height: 1.6; background-color: transparent;">            maxArea = <span style="display: inline; line-height: 1.6; color: #e6db74; background-color: transparent;">Math</span>.max(               <span style="display: inline; line-height: 1.6; color: #75715e; background-color: transparent;">// 计算面积，并挑战最大面积</span>
</div><div style="min-height: 1.5em; color: inherit; line-height: 1.6; background-color: transparent;">                maxArea,                        <span style="display: inline; line-height: 1.6; color: #75715e; background-color: transparent;">// 计算出栈的bar形成的长方形面积</span>
</div><div style="min-height: 1.5em; color: inherit; line-height: 1.6; background-color: transparent;">                heights[stackTopIndex] * (i - stack[stack.length - <span style="display: inline; line-height: 1.6; color: #ae81ff; background-color: transparent;">1</span>] - <span style="display: inline; line-height: 1.6; color: #ae81ff; background-color: transparent;">1</span>)
</div><div style="min-height: 1.5em; color: inherit; line-height: 1.6; background-color: transparent;">            )
</div><div style="min-height: 1.5em; color: inherit; line-height: 1.6; background-color: transparent;">        }
</div><div style="min-height: 1.5em; color: inherit; line-height: 1.6; background-color: transparent;">        stack.push(i)                       <span style="display: inline; line-height: 1.6; color: #75715e; background-color: transparent;">// 当前bar比栈顶bar高了，入栈</span>
</div><div style="min-height: 1.5em; color: inherit; line-height: 1.6; background-color: transparent;">    }
</div><div style="min-height: 1.5em; color: inherit; line-height: 1.6; background-color: transparent;">    <span style="display: inline; line-height: 1.6; color: #f92672; background-color: transparent;">return</span> maxArea
</div><div style="min-height: 1.5em; color: inherit; line-height: 1.6; background-color: transparent;">}
</div></code></pre></div><center style="display:none !important;visibility:collapse !important;height:0 !important;white-space:nowrap;width:100%;overflow:hidden">%23%20%u7B97%u6CD5--%u5355%u8C03%u6808%0A@%28%u524D%u7AEF%u9762%u8BD5%29%5B%u9762%u8BD5%5D%0A%23%23%23%20%u6BCF%u65E5%u6E29%u5EA6%0A%21%5BAlt%20text%5D%28./1638892650362.png%29%0A%60%60%60javascript%0A/**%0A%20*%20@param%20%7Bnumber%5B%5D%7D%20T%0A%20*%20@return%20%7Bnumber%5B%5D%7D%0A%20*/%0A%20//%20%u5355%u8C03%u9012%u51CF%u6808%0Aconst%20dailyTemperatures%20%3D%20function%20%28T%29%20%7B%0A%20%20%20%20let%20len%20%3D%20T.length%3B%0A%20%20%20%20let%20res%20%3D%20Array%28len%29.fill%280%29%2C%20stack%20%3D%20%5B%5D%3B%0A%20%20%20%20for%20%28let%20i%20%3D%200%3B%20i%20%3C%20len%3B%20i++%29%20%7B%0A%20%20%20%20%20%20%20%20//%20%u5F53%u6808%u4E0D%u4E3A%u7A7A%u4E14%u5F53%u524D%u7684%u904D%u5386%u503C%u5927%u4E8E%u6808%u9876%u5143%u7D20%uFF0C%u5219%u51FA%u6808%0A%20%20%20%20%20%20%20%20while%20%28stack.length%20%26%26%20T%5Bstack%5Bstack.length%20-%201%5D%5D%20%3C%20T%5Bi%5D%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20let%20index%20%3D%20stack.pop%28%29%3B%20//%20%0A%20%20%20%20%20%20%20%20%20%20%20%20res%5Bindex%5D%20%3D%20i%20-%20index%3B%20//%20%u8BA1%u7B97%u8DDD%u79BB%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20stack.push%28i%29%3B%0A%20%20%20%20%7D%0A%20%20%20%20return%20res%0A%7D%3B%0A%60%60%60%0A%0A%23%23%23%20%u4E0B%u4E00%u4E2A%u66F4%u5927%u5143%u7D20%20I%0A%21%5BAlt%20text%5D%28./1638892684544.png%29%0A%60%60%60javascript%0A/**%0A%20*%20@param%20%7Bnumber%5B%5D%7D%20nums1%0A%20*%20@param%20%7Bnumber%5B%5D%7D%20nums2%0A%20*%20@return%20%7Bnumber%5B%5D%7D%0A%20*/%0A//%20%u5355%u8C03%u9012%u589E%u6808%uFF1A%u53EA%u6709%u6BD4%u6808%u9876%u5C0F%u7684%u624D%u80FD%u5165%u6808%uFF0C%u5426%u5219%u5C31%u628A%u6808%u9876%u5143%u7D20%u4F9D%u6B21%u51FA%u6808%u540E%uFF0C%u518D%u5165%u6808%u3002%u9002%u7528%u4E8E%u6C42%u89E3%u7B2C%u4E00%u4E2A%u5927%u4E8E%u8BE5%u4F4D%u7F6E%u5143%u7D20%u7684%u6570%u3002%0A//%20%u5355%u8C03%u9012%u51CF%u6808%uFF1A%u4E0E%u5355%u8C03%u9012%u589E%u6808%u76F8%u53CD%u3002%u9002%u7528%u4E8E%u6C42%u89E3%u7B2C%u4E00%u4E2A%u5C0F%u4E8E%u8BE5%u4F4D%u7F6E%u5143%u7D20%u7684%u6570%u3002%0Avar%20nextGreaterElement%20%3D%20function%20%28nums1%2C%20nums2%29%20%7B%0A%20%20%20%20let%20stack%20%3D%20%5B%5D%3B%0A%20%20%20%20let%20map%20%3D%20new%20Map%28%29%3B%0A%20%20%20%20for%20%28let%20i%20%3D%200%3B%20i%20%3C%20nums2.length%3B%20i++%29%20%7B%0A%20%20%20%20%20%20%20%20while%20%28stack.length%20%26%26%20nums2%5Bi%5D%20%3E%20nums2%5Bstack%5Bstack.length%20-%201%5D%5D%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20let%20index%20%3D%20stack.pop%28%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20map.set%28nums2%5Bindex%5D%2C%20nums2%5Bi%5D%29%3B%20//%20%u4FDD%u5B58%u6570%u503C%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20stack.push%28i%29%3B%0A%20%20%20%20%7D%0A%20%20%20%20//%20console.log%28map%29%0A%20%20%20%20let%20res%20%3D%20%5B%5D%3B%0A%20%20%20%20//%20%u904D%u5386%u6570%u7EC41%u4E2D%u7684%u6570%u636E%uFF0C%u6CA1%u6709%u7684%u8BDD%u5C31%u662F-1%0A%20%20%20%20for%20%28let%20j%20%3D%200%3B%20j%20%3C%20nums1.length%3B%20j++%29%20%7B%0A%20%20%20%20%20%20%20%20res%5Bj%5D%20%3D%20map.get%28nums1%5Bj%5D%29%20%7C%7C%20-1%3B%0A%20%20%20%20%7D%0A%20%20%20%20return%20res%3B%0A%7D%3B%0A%60%60%60%0A%0A%0A%23%23%23%20%u4E0B%u4E00%u4E2A%u66F4%u5927%u5143%u7D20%20II%0A%21%5BAlt%20text%5D%28./1638968759783.png%29%0A%60%60%60javascript%0A/**%0A%20*%20@param%20%7Bnumber%5B%5D%7D%20nums%0A%20*%20@return%20%7Bnumber%5B%5D%7D%0A%20*/%0Avar%20nextGreaterElements%20%3D%20function%20%28nums%29%20%7B%0A%20%20%20%20let%20stack%20%3D%20%5B%5D%3B%0A%20%20%20%20let%20res%20%3D%20new%20Array%28nums.length%29.fill%28-1%29%3B%0A%20%20%20%20//%20%u904D%u5386%u4E24%u904D%u6570%u7EC4%0A%20%20%20%20for%20%28let%20i%20%3D%200%3B%20i%20%3C%20nums.length%20*%202%3B%20i++%29%20%7B%0A%20%20%20%20%20%20%20%20while%20%28%0A%20%20%20%20%20%20%20%20%20%20%20%20stack.length%20%26%26%0A%20%20%20%20%20%20%20%20%20%20%20%20nums%5Bi%20%25%20nums.length%5D%20%3E%20nums%5Bstack%5Bstack.length%20-%201%5D%5D%0A%20%20%20%20%20%20%20%20%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20let%20index%20%3D%20stack.pop%28%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20res%5Bindex%5D%20%3D%20nums%5Bi%20%25%20nums.length%5D%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20stack.push%28i%20%25%20nums.length%29%3B%0A%20%20%20%20%7D%0A%20%20%20%20return%20res%3B%0A%7D%3B%0A%60%60%60%0A%0A%0A%23%23%23%20%u63A5%u96E8%u6C34%0A%21%5BAlt%20text%5D%28./1638970914377.png%29%0A%21%5BAlt%20text%5D%28./1638970936675.png%29%0A%21%5BAlt%20text%5D%28./1638971069721.png%29%0A%60%60%60javascript%0A/**%0A%20*%20@param%20%7Bnumber%5B%5D%7D%20height%0A%20*%20@return%20%7Bnumber%7D%0A%20*/%0Avar%20trap%20%3D%20function%20%28height%29%20%7B%0A%20%20%20%20const%20n%20%3D%20height.length%3B%0A%20%20%20%20if%20%28n%20%3D%3D%200%29%20%7B%0A%20%20%20%20%20%20%20%20return%200%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20const%20leftMax%20%3D%20new%20Array%28n%29.fill%280%29%3B%0A%20%20%20%20leftMax%5B0%5D%20%3D%20height%5B0%5D%3B%0A%20%20%20%20for%20%28let%20i%20%3D%201%3B%20i%20%3C%20n%3B%20++i%29%20%7B%0A%20%20%20%20%20%20%20%20leftMax%5Bi%5D%20%3D%20Math.max%28leftMax%5Bi%20-%201%5D%2C%20height%5Bi%5D%29%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20const%20rightMax%20%3D%20new%20Array%28n%29.fill%280%29%3B%0A%20%20%20%20rightMax%5Bn%20-%201%5D%20%3D%20height%5Bn%20-%201%5D%3B%0A%20%20%20%20for%20%28let%20i%20%3D%20n%20-%202%3B%20i%20%3E%3D%200%3B%20--i%29%20%7B%0A%20%20%20%20%20%20%20%20rightMax%5Bi%5D%20%3D%20Math.max%28rightMax%5Bi%20+%201%5D%2C%20height%5Bi%5D%29%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20let%20ans%20%3D%200%3B%0A%20%20%20%20for%20%28let%20i%20%3D%200%3B%20i%20%3C%20n%3B%20++i%29%20%7B%0A%20%20%20%20%20%20%20%20ans%20+%3D%20Math.min%28leftMax%5Bi%5D%2C%20rightMax%5Bi%5D%29%20-%20height%5Bi%5D%3B%0A%20%20%20%20%7D%0A%20%20%20%20return%20ans%3B%0A%7D%3B%0A%60%60%60%0A%0A%23%23%23%20%u67F1%u72B6%u56FE%u4E2D%u6700%u5927%u7684%u77E9%u5F62%0A%21%5BAlt%20text%5D%28./1638978120478.png%29%0A%60%60%60javascript%0Aconst%20largestRectangleArea%20%3D%20%28heights%29%20%3D%3E%20%7B%0A%20%20%20%20let%20maxArea%20%3D%200%0A%20%20%20%20const%20stack%20%3D%20%5B%5D%0A%20%20%20%20heights%20%3D%20%5B0%2C%20...heights%2C%200%5D%0A%20%20%20%20for%20%28let%20i%20%3D%200%3B%20i%20%3C%20heights.length%3B%20i++%29%20%7B%0A%20%20%20%20%20%20%20%20while%20%28heights%5Bi%5D%20%3C%20heights%5Bstack%5Bstack.length%20-%201%5D%5D%29%20%7B%20//%20%u5F53%u524Dbar%u6BD4%u6808%u9876bar%u77EE%0A%20%20%20%20%20%20%20%20%20%20%20%20const%20stackTopIndex%20%3D%20stack.pop%28%29%20//%20%u6808%u9876%u5143%u7D20%u51FA%u6808%uFF0C%u5E76%u4FDD%u5B58%u6808%u9876bar%u7684%u7D22%u5F15%0A%20%20%20%20%20%20%20%20%20%20%20%20maxArea%20%3D%20Math.max%28%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20//%20%u8BA1%u7B97%u9762%u79EF%uFF0C%u5E76%u6311%u6218%u6700%u5927%u9762%u79EF%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20maxArea%2C%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20//%20%u8BA1%u7B97%u51FA%u6808%u7684bar%u5F62%u6210%u7684%u957F%u65B9%u5F62%u9762%u79EF%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20heights%5BstackTopIndex%5D%20*%20%28i%20-%20stack%5Bstack.length%20-%201%5D%20-%201%29%0A%20%20%20%20%20%20%20%20%20%20%20%20%29%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20stack.push%28i%29%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20//%20%u5F53%u524Dbar%u6BD4%u6808%u9876bar%u9AD8%u4E86%uFF0C%u5165%u6808%0A%20%20%20%20%7D%0A%20%20%20%20return%20maxArea%0A%7D%0A%60%60%60</center><br/></span>
</div></body></html> 